<!--
 * @Author: caixin caixin185@163.com
 * @Date: 2024-12-24 12:34:02
-->
# 1.合成事件
合成事件是由Vue框架封装的，通过绑定在Vue组件的事件指令上来触发，例如@click、@input等。而原生事件是直接通过DOM元素上的事件监听器来触发，例如addEventListener。

合成事件中的事件对象是Vue框架自己创建的，它是对原生事件对象的封装，提供了一些额外的属性和方法。而原生事件中的事件对象是浏览器提供的，具有浏览器原生的属性和方法。
## 1.1 跨平台兼容性
合成事件是Vue框架对不同浏览器的事件处理逻辑进行统一封装，使得开发者不需要关心浏览器兼容性问题。而原生事件需要开发者自己处理跨浏览器的兼容性问题。
## 1.2 性能优化
合成事件经过Vue框架的优化处理，可以提高性能。Vue会对事件进行批量处理，减少不必要的重绘和重排操作。而原生事件没有经过Vue的优化处理，可能会导致性能问题。

# 2.vue3的改进
## 2.1 性能提升
Vue 3的性能比Vue 2有了显著的提升，主要体现在以下几个方面：

1. **编译优化**：Vue 3引入了新的编译器，对模板编译进行了优化，使得渲染性能得到了提升。
2. **响应式系统**：Vue 3的响应式系统使用了Proxy代替了Vue 2中的Object.defineProperty，使得响应式系统的性能得到了提升。
3. **虚拟DOM**：Vue 3的虚拟DOM进行了优化，使得渲染性能得到了提升。
4. **按需编译**：Vue 3支持按需编译，可以只编译需要使用的组件，减少不必要的编译开销。
## 2.2 更好的TypeScript支持
Vue 3对TypeScript的支持更好，提供了更好的类型推断和类型检查，使得使用TypeScript开发Vue应用更加方便和可靠。
## 2.3 更小的体积
Vue 3的体积比Vue 2更小，因为Vue 3对代码进行TreeShaking 了更好的压缩和优化，使得打包后的文件体积更小，加载速度更快。
## 2.4 更灵活的组件化
Vue 3提供了更灵活的组件化方式，支持更细粒度的组件拆分和组合，使得开发大型应用更加方便和高效。
## 2.5 Teleport：Vue 3引入了Teleport（传送门）功能，它可以将组件的内容渲染到DOM结构的不同位置，使得组件的渲染更加灵活和可控。

## 2.6 Fragment：Vue 3引入了Fragment（片段）功能，它允许组件返回多个根元素，而不需要包裹在一个额外的父元素中。

## 2.7 Suspense：Vue 3引入了Suspense（悬念）功能，它允许组件在等待异步操作完成时显示一个加载状态，从而提高用户体验。

## 2.8 Composition API：Vue 3引入了Composition API（组合API），它提供了一种更灵活和可组合的方式来组织组件的逻辑，使得代码更加清晰和可维护。
## shallowRef() 浅层响应式
## markRaw() 原始值 标记冻结

## 2.9 在Vue3中使用patchFlag（静态标记）对diff算法进行了优化，在创建虚拟DOM时，根据DOM内容是否会发生变化，而给在createVNode时相应类型的patchFlag，-1永不diff。在更新前节点进行比较的时候，只会去对比带有静态标记的节点，从而减少了不必要的diff比较，提高了性能。

## 2.10 Vue3的编译器会将模板中的静态节点、子树、数据对象，并在生成的代码中将他们提升到渲染函数之外

## 2.11 cacheHandlers 事件监听缓存 默认情况下onClick会被视为动态绑定，所以每次都会追踪他的变化,但是函数还是同一个函数所以没必要追踪，直接缓存起来复用就好了，这就是所说的事件监听缓存。Vue3就做了这一缓存机制去提升性能.

## 2.12 ssr 服务端渲染优化 Vue 3.0 会将静态标签直接转化为文本，